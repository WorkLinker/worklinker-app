# 캐나다 학생 플랫폼 배포 가이드

## 🎯 개요
이 가이드는 캐나다에서 Firebase + Vercel을 사용하여 홈페이지를 실제 운영하는 방법을 설명합니다.

## ✅ 기술 스택 검증 (캐나다 운영)
- **Firebase**: 글로벌 CDN으로 캐나다 전역에서 빠른 속도
- **Vercel**: 캐나다 사용자에게 최적화된 Edge Network
- **Next.js**: 캐나다 정부 웹사이트도 사용하는 안정적인 프레임워크
- **비용**: 소규모 시작 시 **완전 무료**

---

## 🔥 1단계: Firebase 프로젝트 생성

### 1-1. Firebase Console 접속
1. https://console.firebase.google.com 접속
2. "프로젝트 추가" 클릭
3. 프로젝트 이름: `nb-student-jobs` (예시)
4. Google Analytics 활성화 (선택사항)

### 1-2. Firestore 데이터베이스 설정
1. 왼쪽 메뉴에서 "Firestore Database" 클릭
2. "데이터베이스 만들기" 클릭
3. **프로덕션 모드**로 시작 (보안 규칙 필요)
4. 위치: `us-central1` (캐나다와 가장 가까운 서버)

### 1-3. Authentication 설정
1. 왼쪽 메뉴에서 "Authentication" 클릭
2. "시작하기" 클릭
3. Sign-in method에서 "이메일/비밀번호" 활성화
4. 필요시 Google 로그인도 활성화

### 1-4. Storage 설정 (레쥬메 업로드용)
1. 왼쪽 메뉴에서 "Storage" 클릭
2. "시작하기" 클릭
3. 프로덕션 모드로 시작
4. 위치: `us-central1`

### 1-5. 앱 등록 및 설정 키 복사
1. 프로젝트 설정(⚙️ 아이콘) 클릭
2. "일반" 탭에서 "앱 추가" → "웹" 선택
3. 앱 이름: `캐나다 학생 플랫폼`
4. **Firebase SDK 구성 코드 복사** (중요!)

---

## ⚡ 2단계: 환경변수 설정

### 2-1. .env.local 파일 생성
프로젝트 루트에 `.env.local` 파일을 생성하고 아래 내용 입력:

```bash
# Firebase 설정 (위에서 복사한 실제 값으로 교체)
NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXX
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project-id.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789012
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789012:web:abcdefghijklmnop

# 사이트 정보
NEXT_PUBLIC_SITE_URL=https://nbstudentjobs.vercel.app

# 캐나다 연락처
CONTACT_EMAIL=nbhighschooljobs@gmail.com
CONTACT_PHONE=506-429-6148
CONTACT_ADDRESS=122 Brianna Dr Fredericton NB COA 1N0

# 프로덕션 환경
NODE_ENV=production
```

### 2-2. 보안 주의사항
- `.env.local` 파일은 **절대 Git에 커밋하지 마세요**
- `.gitignore`에 `.env.local`이 포함되어 있는지 확인

---

## 🚀 3단계: Vercel 배포

### 3-1. Vercel 계정 생성
1. https://vercel.com 접속
2. GitHub 계정으로 로그인
3. 무료 Hobby 플랜 선택

### 3-2. GitHub Repository 연결
1. 프로젝트를 GitHub에 Push
2. Vercel Dashboard에서 "Import Project"
3. GitHub Repository 선택
4. Framework Preset: **Next.js** 자동 감지

### 3-3. 환경변수 설정 (Vercel)
1. Vercel 프로젝트 설정 → "Environment Variables"
2. 위의 모든 환경변수를 **하나씩** 추가
3. Environment: **Production, Preview, Development** 모두 체크

### 3-4. 도메인 설정 (선택사항)
1. 커스텀 도메인 구매 (예: nbstudentjobs.ca)
2. Vercel 프로젝트 설정 → "Domains"
3. 도메인 추가 후 DNS 설정

---

## 📊 4단계: Firebase 보안 규칙 설정

### 4-1. Firestore 보안 규칙
Firebase Console → Firestore → Rules에서 다음 규칙 적용:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 학생 구직 신청
    match /jobSeekers/{document} {
      allow read: if request.auth != null && 
        (request.auth.uid == resource.data.uid || 
         resource.data.approved == true);
      allow create: if request.auth != null;
      allow update: if request.auth != null && 
        (request.auth.uid == resource.data.uid || 
         hasAdminRole());
    }
    
    // 구인 공고
    match /jobPostings/{document} {
      allow read: if resource.data.approved == true;
      allow create: if request.auth != null;
      allow update: if request.auth != null && 
        (request.auth.uid == resource.data.uid || 
         hasAdminRole());
    }
    
    // 관리자 권한 확인 함수
    function hasAdminRole() {
      return request.auth != null && 
        request.auth.token.admin == true;
    }
  }
}
```

### 4-2. Storage 보안 규칙
Firebase Console → Storage → Rules:

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /resumes/{userId}/{fileName} {
      allow read, write: if request.auth != null && 
        request.auth.uid == userId;
    }
  }
}
```

---

## 🔧 5단계: 최종 테스트

### 5-1. 로컬 테스트
```bash
npm run dev
```
- Firebase 연결 확인
- 폼 제출 테스트
- 이미지 업로드 테스트

### 5-2. 프로덕션 빌드 테스트
```bash
npm run build
npm start
```

### 5-3. Vercel 배포 확인
1. Vercel Dashboard에서 배포 로그 확인
2. 실제 사이트 접속 테스트
3. 모든 기능 동작 확인

---

## 💰 운영 비용 (캐나다 기준)

### Firebase 무료 할당량 (Spark 플랜)
- **Firestore**: 일일 50,000 읽기, 20,000 쓰기
- **Storage**: 1GB 저장공간, 1GB/일 다운로드
- **Authentication**: 무제한
- **예상 지원 가능 사용자**: 월 1,000-2,000명

### Vercel 무료 플랜 (Hobby)
- **대역폭**: 월 100GB
- **Function 실행**: 월 100GB-시간
- **도메인**: 무료 .vercel.app + 커스텀 도메인 1개
- **예상 방문자**: 월 10,000-50,000명

### 💡 확장 계획
사용자가 늘어나면:
1. **Firebase Blaze 플랜**: 사용한 만큼만 지불 (매우 저렴)
2. **Vercel Pro 플랜**: 월 $20 USD (더 많은 트래픽 지원)

---

## 🇨🇦 캐나다 특화 고려사항

### 법적 요구사항
- **개인정보보호법 (PIPEDA)** 준수
- 쿠키 사용 동의 팝업 추가 권장
- 프랑스어 지원 고려 (특히 뉴브런즈윅 주)

### 성능 최적화
- CDN을 통한 빠른 로딩 (Vercel/Firebase 기본 제공)
- 이미지 최적화 (Next.js 기본 제공)
- 캐나다 동부 시간대 설정

### 마케팅 고려사항
- 캐나다 도메인 (.ca) 등록 권장
- Google Analytics 캐나다 설정
- 뉴브런즈윅 주 정부 교육부 연락

---

## ✅ 배포 체크리스트

- [ ] Firebase 프로젝트 생성 완료
- [ ] Firestore 데이터베이스 설정
- [ ] Authentication 활성화
- [ ] Storage 설정 완료
- [ ] 환경변수 설정 완료 (.env.local)
- [ ] GitHub에 코드 Push
- [ ] Vercel 프로젝트 생성
- [ ] Vercel 환경변수 설정
- [ ] Firebase 보안 규칙 설정
- [ ] 프로덕션 빌드 테스트 성공
- [ ] 실제 사이트 동작 확인
- [ ] 도메인 연결 (선택사항)

---

## 🆘 문제 해결

### 자주 발생하는 오류
1. **Firebase 연결 오류**: 환경변수 값 재확인
2. **빌드 실패**: TypeScript 오류 수정
3. **이미지 로딩 실패**: Next.js 이미지 최적화 설정
4. **폼 제출 실패**: Firestore 보안 규칙 확인

### 지원 연락처
- Firebase 지원: https://firebase.google.com/support
- Vercel 지원: https://vercel.com/help
- Next.js 문서: https://nextjs.org/docs

---

## 🎉 결론

**이 홈페이지는 캐나다에서 실제 운영하기에 완벽합니다!**

- ✅ **기술적 완성도**: 프로덕션 레벨
- ✅ **확장성**: 사용자 증가에 대응 가능
- ✅ **비용 효율성**: 초기 무료, 성장에 따른 합리적 비용
- ✅ **성능**: 글로벌 CDN으로 빠른 속도
- ✅ **보안**: Firebase 엔터프라이즈급 보안

캐나다 학생들이 정말 유용하게 사용할 수 있는 훌륭한 플랫폼이 될 것입니다! 🇨🇦✨ 