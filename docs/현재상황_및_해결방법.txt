🚨 현재 상황 및 즉시 해결 방법
========================
작성일: 2025년 1월 14일
상황: 이메일 전송 500 오류 발생 중

❌ 현재 문제
----------
- 이메일 테스트 시 500 Internal Server Error 발생
- 문의 폼에서 이메일 전송 실패
- MailerSend API 연결 불가

🔍 문제 원인
----------
1. .env.local 파일 누락
   - MailerSend API 키가 설정되지 않음
   - 환경변수 로드 실패

2. 환경변수 미설정
   - MAILERSEND_API_KEY 없음
   - MAILERSEND_FROM_EMAIL 없음
   - MAILERSEND_FROM_NAME 없음

⚡ 즉시 해결 방법
--------------

1단계: .env.local 파일 생성
프로젝트 루트 폴더(/d:/CORSORAI/part1/)에 .env.local 파일 생성

2단계: 환경변수 입력
다음 내용을 .env.local 파일에 복사:

# Firebase 설정
NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSyBzy34Qfj6ESjm5cvHazgktCad1DHu71uo
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=client-web-d9c86.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=client-web-d9c86
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=client-web-d9c86.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=1036185501709
NEXT_PUBLIC_FIREBASE_APP_ID=1:1036185501709:web:711bdf1a5473b73fffd544

# MailerSend 설정 (중요!)
MAILERSEND_API_KEY=mlsn.6bb619b6e85d8b6eefa7523a68a7b584f61d1b5084ce204e88f00a4f189034fb
MAILERSEND_FROM_EMAIL=noreply@test-vz9dlem3dk8kj50.mlsender.net
MAILERSEND_FROM_NAME=NB High School Jobs

# 연락처 정보
NEXT_PUBLIC_CONTACT_EMAIL=nbhighschooljobs@gmail.com
NEXT_PUBLIC_CONTACT_PHONE=506-429-6148
NEXT_PUBLIC_CONTACT_ADDRESS=122 Brianna Dr, Fredericton NB COA 1N0
CONTACT_EMAIL=nbhighschooljobs@gmail.com
CONTACT_PHONE=506-429-6148
ADMIN_EMAIL=nbhighschooljobs@gmail.com

# Supabase 설정
NEXT_PUBLIC_SUPABASE_URL=https://bphskpgfvatrjvbwrddf.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwaHNrcGdmdmF0cmp2YndyZGRmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0NTU5NjAsImV4cCI6MjA2ODAzMTk2MH0.ZJm1YS1BBidyfzs_gb4C0i-ROzGbtgxxIynsSFNkSWY
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwaHNrcGdmdmF0cmp2YndyZGRmIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MjQ1NTk2MCwiZXhwIjoyMDY4MDMxOTYwfQ.6n7yG95vqbzH5IFQ4wqFLVHSo2hRJQGGnLUGvq4oITM

3단계: 개발 서버 재시작
터미널에서:
Ctrl+C (서버 종료)
npm run dev (서버 재시작)

4단계: 테스트
1. http://localhost:3000/admin 접속
2. 이메일 테스트 섹션에서 테스트 실행
3. 문의 폼에서 실제 이메일 전송 테스트

📝 파일 생성 방법 (Windows)
-------------------------
1. 탐색기에서 /d:/CORSORAI/part1/ 폴더 열기
2. 빈 공간에서 마우스 우클릭
3. "새로 만들기" → "텍스트 문서"
4. 파일명을 ".env.local"로 변경 (확장자 주의!)
5. 메모장으로 열기
6. 위의 환경변수 내용 복사해서 붙여넣기
7. 저장 (Ctrl+S)

⚠️ 중요 사항
-----------
- .env.local 파일명 정확히 입력
- 환경변수 값에 따옴표 없이 입력
- 파일 저장 후 반드시 서버 재시작
- .env.local 파일은 Git에 커밋하지 않기

🔧 추가 문제 해결
--------------

만약 여전히 문제가 발생한다면:

1. 환경변수 확인
   - API 키 복사할 때 공백 없는지 확인
   - 이메일 주소에 @ 기호 포함되었는지 확인

2. 브라우저 캐시 삭제
   - 개발자 도구 → 네트워크 탭 → "Disable cache" 체크

3. 패키지 재설치
   npm install

4. 포트 변경
   npm run dev -- -p 3001

📞 긴급 연락
----------
위 방법으로 해결되지 않으면 새 채팅에서 다음과 같이 요청:

"MailerSend 이메일 전송이 안 됩니다. .env.local 파일을 생성했지만 여전히 500 오류가 발생합니다. 추가 디버깅 도움이 필요합니다."

💡 성공 확인 방법
--------------
이메일 전송이 성공하면:
- 브라우저 콘솔에 "✅ 이메일 전송 성공" 메시지 표시
- 네트워크 탭에서 /api/send-email 요청이 200 OK 응답
- 실제 이메일 수신 (Gmail 등에서 확인)

🎯 최종 목표
----------
캐나다 학생 일자리 플랫폼의 자동 이메일 알림 시스템 완전 작동
- 문의사항 자동 알림
- 구직 신청 알림
- 채용 공고 알림
- 승인/거절 이메일 발송 